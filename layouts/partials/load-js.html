<!--
    JS script loading logic:
    - If a script matching the post slug exists in /js/script/, include it.
    - If not, and a script matching the post type exists, include that.
    - If both slug and type are the same, only include one (slug takes precedence).
    - If neither exists, no script is included.
-->
{{ $slug := .File.BaseFileName }}
{{ $type := .Params.type }}
{{ $slugScript := printf "js/script/%s.js" $slug }}
{{ $typeScript := printf "js/script/%s.js" $type }}

{{ if (fileExists (printf "static/%s" $slugScript)) }}
    <script src="{{ $slugScript | absURL }}"></script>
{{ else if and $type (fileExists (printf "static/%s" $typeScript)) }}
    <script src="{{ $typeScript | absURL }}"></script>
{{ end }}

<!--
    Style-based JS script loading logic:
    - For each value in the post's frontmatter 'style' array:
        - If a script named js/script/(style).js exists in /static/, include it.
        - Multiple style scripts can be included if multiple styles are listed.
    - This allows per-style JS to be loaded automatically for posts that declare styles.
-->
{{ with .Params.style }}
  {{ range . }}
    {{ $styleScript := printf "js/script/%s.js" . }}
    {{ if (fileExists (printf "static/%s" $styleScript)) }}
      <script src="{{ $styleScript | absURL }}"></script>
    {{ end }}
  {{ end }}
{{ end }}


 
   <script>
       document.documentElement.classList.remove("no-js");
       document.documentElement.classList.add("js");
   </script>


        <script src="{{ printf "js/global/popper.min.js" | absURL }}"></script>
         <script src="{{ printf "js/global/tippy-bundle.umd.min.js" | absURL }}"></script>

                <!--
    JS Library Loading Logic:
    - For each value in the post's frontmatter 'js-lib' array:
        - Check if "js/lib/NAME.min.js" exists:
            - If it exists, include it.
        - If "js/lib/NAME.min.js" does not exist, check for "js/lib/NAME.js":
            - If it exists, include it.
        - If neither exists, skip the library.
    - This ensures that the minified version is preferred if both are available.
-->
{{ with index .Params "js-lib" }}
  {{ range . }}
    {{ $libMin := printf "js/lib/%s.min.js" . }}
    {{ $lib := printf "js/lib/%s.js" . }}
    {{ if (fileExists (printf "static/%s" $libMin)) }}
      <script src="{{ $libMin | absURL }}"></script>
    {{ else if (fileExists (printf "static/%s" $lib)) }}
      <script src="{{ $lib | absURL }}"></script>
    {{ else }}
      <!-- WARNING: Library "js/lib/{{ . }}" not found -->
    {{ end }}
  {{ end }}
{{ else }}
  <!-- WARNING: No js-lib scripts found in frontmatter -->
{{ end }}
{{ with index .Params "js-script" }}
  {{ range . }}
    <script src="{{ printf "js/script/%s.js" . | absURL }}"></script>
  {{ end }}
{{ end }}
        <script>
            document.querySelectorAll(".tooltip").forEach((el) => {
                const tipId = el.getAttribute("data-tooltip-id");
                const content =
                    document.getElementById(tipId)?.innerHTML || "No content";

                tippy(el, {
                    content,
                    allowHTML: true,
                    interactive: true,
                });
            });
        </script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
    var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
      return new bootstrap.Popover(popoverTriggerEl, {
        trigger: 'hover',
        html: true
      });
    });
  });
</script>



