/*
 * VECTORTILES.SCSS - SVG Pattern Generation Library
 * =================================================
 *
 * LINES MIXIN - Master pattern generator for line-based SVG backgrounds
 *
 * SINGLE LAYER USAGE:
 * @include lines($thickness, $size, $color, $angle, $svg-size);
 *
 * Parameters (in order):
 * - $thickness: Line thickness as percentage of pattern size (e.g., 10%, 50%, 90%)
 * - $size: Pattern repeat size in pixels (e.g., 20px, 36px, 100px)
 * - $color: Any CSS color format (see Color Support below)
 * - $angle: Rotation angle with units (e.g., 0deg, 45deg, 90deg, 135deg)
 * - $svg-size: [OPTIONAL] SVG canvas size for bleed control (default: 500px)
 *
 * MULTI-LAYER USAGE:
 * $layer1: ($thickness, $size, $color, $angle);
 * $layer2: ($thickness, $size, $color, $angle);
 * @include lines($layer1, $layer2, $layer3...);
 *
 * COLOR SUPPORT:
 * - All color inputs (hex, named colors, rgb, rgba, anything you throw at it)
 * PS:  Transparent/alpha values work perfectly for layer blending
 *
 * BLEED CONTROL:
 * If patterns show edge artifacts, increase the secret 5th parameter:
 * @include lines(10%, 36px, red, 45deg, 800px); // Larger SVG canvas
 *
 * COMMON PATTERNS:
 * - Horizontal lines: @include lines(10%, 30px, #666, 0deg);
 * - Diagonal stripes: @include lines(50%, 20px, blue, 45deg);
 * - Grid pattern: Use multi-layer with 0deg + 90deg angles
 * - Tartan plaid: Use multi-layer with 45deg + 90deg + 135deg angles
 * - Cross/Plus: Use multi-layer with matching angles 90deg apart
 *
 * EXAMPLES:
 * Simple stripe: @include lines(15%, 24px, #ff8c00, 30deg);
 * Grid: @include lines((8%, 30px, green, 0deg), (8%, 30px, green, 90deg));
 * Tartan: @include lines((5%, 40px, red, 45deg), (5%, 40px, blue, 90deg), (5%, 40px, yellow, 135deg));
 */

// Função para converter qualquer cor para formato data URL (versão simplificada)
@function color-to-data-url($color) {
    // Converte tudo para string e substitui # por %23 se necessário
    $color-string: "#{$color}";

    // Se é hex, substitui # por %23
    @if str-index($color-string, "#") == 1 {
        @return "%23" + str-slice($color-string, 2);
    }

    // Para rgba/rgb, retorna como está (navegadores modernos suportam)
    @return $color-string;
}



// DOTS MIXIN - padrão simples usando radial-gradient (sem SVG por ora)
// Uso: @include dots($density, $size, $color, $spacing);
// $density atualmente ignorado (hook futuro para ajustar $spacing dinamicamente)
@mixin dots($density, $size, $color, $spacing) {
    background-image: radial-gradient(circle, #{$color} #{$size}, transparent #{$size});
    background-size: $spacing $spacing;
    background-repeat: repeat;
}

// Exemplo:
// @include dots(20%, 16px, #666, 32px);

@mixin lines($args...) {
    // Verifica se o primeiro argumento é uma lista (layer) ou valor simples
    $first-arg: nth($args, 1);
    $is-multi-layer: false;

    @if type-of($first-arg) == list and length($first-arg) >= 4 {
        $is-multi-layer: true;
    }

    @if $is-multi-layer {
        // Multi-layer with repeating-linear-gradient (sem SVG)
        $images: ();
        @each $layer in $args {
            $thickness: nth($layer, 1);
            $size: nth($layer, 2);
            $color: nth($layer, 3);
            $angle: nth($layer, 4);
            $height: $size * $thickness / 100%;
            $grad: repeating-linear-gradient(
                $angle,
                #{$color} 0,
                #{$color} #{$height},
                transparent #{$height},
                transparent #{$size}
            );
            $images: append($images, $grad, comma);
        }
        background-image: $images;
        // repeating-linear-gradient não requer background-size explícito
    }
    @else {
        // Single layer simples
        $thickness: if(length($args) > 0, nth($args, 1), 10%);
        $size: if(length($args) > 1, nth($args, 2), 36px);
        $color: if(length($args) > 2, nth($args, 3), #ff8c00);
        $angle: if(length($args) > 3, nth($args, 4), 0deg);
        $height: $size * $thickness / 100%;
        background-image: repeating-linear-gradient(
            $angle,
            #{$color} 0,
            #{$color} #{$height},
            transparent #{$height},
            transparent #{$size}
        );
    }
}
